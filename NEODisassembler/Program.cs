using System;

namespace NEODisassembler
{
    class Program
    {
        static void Main(string[] args)
        {
            string filename = "C:\\Users\\liaoj\\source\\repos\\NeoContract2\\NeoContract2\\bin\\Debug\\NeoContract2.avm";//args[0];
            System.IO.Stream fs = null;
            //open file
            try
            {
                string line;
               
                var AVM = System.IO.File.ReadAllBytes(filename);//Helper.HexString2Bytes();
               //  var AVM =  Helper.HexString2Bytes("012FC56B6C766B00527AC46C766B51527AC4616168164E656F2E52756E74696D652E47657454726967676572009C6C766B52527AC46C766B52C36418046161682953797374656D2E457865637574696F6E456E67696E652E476574536372697074436F6E7461696E65726C766B53527AC46C766B53C36168194E656F2E5472616E73616374696F6E2E476574496E707574736C766B54527AC46C766B53C361681A4E656F2E5472616E73616374696F6E2E4765744F7574707574736C766B55527AC4616C766B54C36C766B59527AC4006C766B5A527AC4622B016C766B59C36C766B5AC3C36C766B5B527AC4616C766B5BC36168124E656F2E496E7075742E476574496E646578009C6C766B5C527AC46C766B5CC364DE00616168164E656F2E53746F726167652E476574436F6E7465787406726566756E64617C6545176C766B5D527AC46C766B5DC36C766B5BC36168114E656F2E496E7075742E47657448617368617C6555176C766B5E527AC46C766B5EC3C000A06C766B5F527AC46C766B5FC3646F00616C766B54C3C051907C907C9E6310006C766B55C3C0519C009C620400516C766B60527AC46C766B60C3640F00006C766B0111527AC4620F076C766B55C300C36168184E656F2E4F75747075742E476574536372697074486173686C766B5EC39C6C766B0111527AC462DC0661616C766B5AC351936C766B5A527AC46C766B5AC36C766B59C3C09F63CCFE61682D53797374656D2E457865637574696F6E456E67696E652E476574457865637574696E67536372697074486173686C766B56527AC4006C766B57527AC4616C766B53C361681D4E656F2E5472616E73616374696F6E2E4765745265666572656E6365736C766B0112527AC4006C766B0113527AC462E9006C766B0112C36C766B0113C3C36C766B0114527AC4616C766B0114C36168154E656F2E4F75747075742E476574417373657449646120E72D286979EE6CB1B7E65DFDDFB2E384100B8D148E7758DE42E4168B71792C609E6C766B0115527AC46C766B0115C3640F00006C766B0111527AC462D0056C766B0114C36168184E656F2E4F75747075742E476574536372697074486173686C766B56C39C6C766B0116527AC46C766B0116C3642C006C766B57C36C766B0114C36168134E656F2E4F75747075742E47657456616C7565936C766B57527AC4616C766B0113C351936C766B0113527AC46C766B0113C36C766B0112C3C09F630CFF006C766B58527AC4616C766B55C36C766B0117527AC4006C766B0118527AC4628B006C766B0117C36C766B0118C3C36C766B0119527AC4616C766B0119C36168184E656F2E4F75747075742E476574536372697074486173686C766B56C39C6C766B011A527AC46C766B011AC3642C006C766B58C36C766B0119C36168134E656F2E4F75747075742E47657456616C7565936C766B58527AC4616C766B0118C351936C766B0118527AC46C766B0118C36C766B0117C3C09F636AFF6C766B58C36C766B57C39C6C766B0111527AC4627C046168164E656F2E52756E74696D652E47657454726967676572609C6C766B011B527AC46C766B011BC3649E026161682B53797374656D2E457865637574696F6E456E67696E652E47657443616C6C696E67536372697074486173686C766B011C527AC46C766B00C30962616C616E63654F66876C766B011D527AC46C766B011DC36419006C766B51C300C36165F7036C766B0111527AC462E2036C766B00C308646563696D616C73876C766B011E527AC46C766B011EC3641200616570046C766B0111527AC462B3036C766B00C30F676574526566756E64546172676574876C766B011F527AC46C766B011FC36419006C766B51C300C361653B046C766B0111527AC46276036C766B00C3096765745478496E666F876C766B0120527AC46C766B0120C36419006C766B51C300C36165B1046C766B0111527AC4623F036C766B00C30A6D696E74546F6B656E73876C766B0121527AC46C766B0121C36412006165E6056C766B0111527AC4620E036C766B00C3046E616D65876C766B0122527AC46C766B0122C36412006165200A6C766B0111527AC462E3026C766B00C306726566756E64876C766B0123527AC46C766B0123C36419006C766B51C300C36165FC096C766B0111527AC462AF026C766B00C30673796D626F6C876C766B0124527AC46C766B0124C36412006165F70E6C766B0111527AC46282026C766B00C312737570706F727465645374616E6461726473876C766B0125527AC46C766B0125C36412006165CA0E6C766B0111527AC46249026C766B00C30B746F74616C537570706C79876C766B0126527AC46C766B0126C36412006165BC0E6C766B0111527AC46217026C766B00C3087472616E73666572876C766B0127527AC46C766B0127C36441006C766B51C300C36C766B51C351C36C766B51C352C36C766B011CC361537951795572755172755279527954727552727565D60E6C766B0111527AC462B9016162A9016168164E656F2E52756E74696D652E47657454726967676572519C6C766B0128527AC46C766B0128C3647D016161682D53797374656D2E457865637574696F6E456E67696E652E476574457865637574696E67536372697074486173686C766B0129527AC461682953797374656D2E457865637574696F6E456E67696E652E476574536372697074436F6E7461696E65726C766B012A527AC4616C766B012AC361681A4E656F2E5472616E73616374696F6E2E4765744F7574707574736C766B012B527AC4006C766B012C527AC462BB006C766B012BC36C766B012CC3C36C766B012D527AC4616C766B012DC36168184E656F2E4F75747075742E476574536372697074486173686C766B0129C3907C907C9E6347006C766B012DC36168154E656F2E4F75747075742E476574417373657449646120E72D286979EE6CB1B7E65DFDDFB2E384100B8D148E7758DE42E4168B71792C609E620400006C766B012E527AC46C766B012EC3640F00006C766B0111527AC4623D00616C766B012CC351936C766B012C527AC46C766B012CC36C766B012BC3C09F633AFF516C766B0111527AC4620F00006C766B0111527AC46203006C766B0111C3616C756654C56B6C766B00527AC4616C766B00C3C001149C009C6C766B52527AC46C766B52C36439003254686520706172616D65746572206163636F756E742053484F554C442062652032302D62797465206164647265737365732E6175F06168164E656F2E53746F726167652E476574436F6E74657874056173736574617C652F0F6C766B51527AC46C766B51C36C766B00C3617C65530F6C766B53527AC46203006C766B53C3616C756600C56B58616C756654C56B6C766B00527AC4616C766B00C3C001209C009C6C766B52527AC46C766B52C3643D003654686520706172616D6574657220747849642053484F554C442062652033322D62797465207472616E73616374696F6E20686173682E6175F06168164E656F2E53746F726167652E476574436F6E7465787406726566756E64617C657A0E6C766B51527AC46C766B51C36C766B00C3617C659E0E6C766B53527AC46203006C766B53C3616C756656C56B6C766B00527AC4616C766B00C3C001209C009C6C766B53527AC46C766B53C3643D003654686520706172616D6574657220747849642053484F554C442062652033322D62797465207472616E73616374696F6E20686173682E6175F06168164E656F2E53746F726167652E476574436F6E74657874067478496E666F617C65CD0D6C766B51527AC46C766B51C36C766B00C3617C65F10D6C766B52527AC46C766B52C3C0009C6C766B54527AC46C766B54C3640E00006C766B55527AC4622C006C766B52C36168174E656F2E52756E74696D652E446573657269616C697A656C766B55527AC46203006C766B55C3616C756653C56B6C766B00527AC4616C766B00C361681A4E656F2E426C6F636B636861696E2E476574436F6E74726163746C766B51527AC46C766B51C36424006C766B51C36168164E656F2E436F6E74726163742E497350617961626C65620400516C766B52527AC46203006C766B52C3616C75660114C56B6161682953797374656D2E457865637574696F6E456E67696E652E476574536372697074436F6E7461696E65726C766B00527AC4006C766B51527AC46C766B00C361681D4E656F2E5472616E73616374696F6E2E4765745265666572656E6365736C766B52527AC4616C766B52C36C766B59527AC4006C766B5A527AC46210016C766B59C36C766B5AC3C36C766B5B527AC4616C766B5BC36168154E656F2E4F75747075742E476574417373657449646120E72D286979EE6CB1B7E65DFDDFB2E384100B8D148E7758DE42E4168B71792C609C6C766B5C527AC46C766B5CC36434006C766B51C376632400756C766B5BC36168184E656F2E4F75747075742E476574536372697074486173686C766B51527AC46C766B5BC36168184E656F2E4F75747075742E4765745363726970744861736861682D53797374656D2E457865637574696F6E456E67696E652E476574457865637574696E67536372697074486173689C6C766B5D527AC46C766B5DC3640E00006C766B5E527AC462DD02616C766B5AC351936C766B5A527AC46C766B5AC36C766B59C3C09F63E7FE6C766B00C36168174E656F2E5472616E73616374696F6E2E476574486173686165DAFC00A06C766B5F527AC46C766B5FC3640E00006C766B5E527AC46280026C766B00C361681A4E656F2E5472616E73616374696F6E2E4765744F7574707574736C766B53527AC4006C766B54527AC4616C766B53C36C766B60527AC4006C766B0111527AC46203016C766B60C36C766B0111C3C36C766B0112527AC4616C766B0112C36168184E656F2E4F75747075742E4765745363726970744861736861682D53797374656D2E457865637574696F6E456E67696E652E476574457865637574696E6753637269707448617368907C907C9E6347006C766B0112C36168154E656F2E4F75747075742E476574417373657449646120E72D286979EE6CB1B7E65DFDDFB2E384100B8D148E7758DE42E4168B71792C609C620400006C766B0113527AC46C766B0113C3642E00616C766B54C36C766B0112C36168134E656F2E4F75747075742E47657456616C7565936C766B54527AC461616C766B0111C351936C766B0111527AC46C766B0111C36C766B60C3C09F63F3FE6168164E656F2E53746F726167652E476574436F6E7465787408636F6E7472616374617C658B096C766B55527AC46C766B55C30B746F74616C537570706C79617C65030A6C766B56527AC46C766B56C36C766B54C3936C766B56527AC46C766B55C30B746F74616C537570706C796C766B56C361527265290A616168164E656F2E53746F726167652E476574436F6E74657874056173736574617C6514096C766B57527AC46C766B57C36C766B51C3617C6538096C766B58527AC46C766B57C36C766B51C36C766B58C36C766B54C39361527265260A61006C766B51C36C766B54C36152726596046161006C766B51C36C766B54C3615272087472616E7366657254C168124E656F2E52756E74696D652E4E6F7469667961516C766B5E527AC46203006C766B5EC3616C756600C56B084E45503520474153616C75660111C56B6C766B00527AC4616C766B00C3C001149C009C6C766B59527AC46C766B59C36436002F54686520706172616D657465722066726F6D2053484F554C442062652032302D62797465206164647265737365732E6175F061682953797374656D2E457865637574696F6E456E67696E652E476574536372697074436F6E7461696E65726C766B51527AC46C766B51C361681A4E656F2E5472616E73616374696F6E2E4765744F75747075747300C36C766B52527AC46C766B52C36168154E656F2E4F75747075742E476574417373657449646120E72D286979EE6CB1B7E65DFDDFB2E384100B8D148E7758DE42E4168B71792C609E6C766B5A527AC46C766B5AC3640E00006C766B5B527AC46228036C766B52C36168184E656F2E4F75747075742E4765745363726970744861736861682D53797374656D2E457865637574696F6E456E67696E652E476574457865637574696E67536372697074486173689E6C766B5C527AC46C766B5CC3640E00006C766B5B527AC462BD026168164E656F2E53746F726167652E476574436F6E7465787406726566756E64617C65D5066C766B53527AC46C766B53C36C766B51C36168174E656F2E5472616E73616374696F6E2E47657448617368617C65DF06C000A06C766B5D527AC46C766B5DC3640E00006C766B5B527AC4624B026C766B00C36168184E656F2E52756E74696D652E436865636B5769746E657373009C6C766B5E527AC46C766B5EC3640E00006C766B5B527AC4620F026168164E656F2E53746F726167652E476574436F6E74657874056173736574617C6528066C766B54527AC46C766B54C36C766B00C3617C654C066C766B55527AC46C766B52C36168134E656F2E4F75747075742E47657456616C75656C766B56527AC46C766B55C36C766B56C39F6C766B5F527AC46C766B5FC3640E00006C766B5B527AC46287016C766B55C36C766B56C39C6C766B60527AC46C766B60C36416006C766B54C36C766B00C3617C653F0761621F006C766B54C36C766B00C36C766B55C36C766B56C39461527265C606616C766B53C36C766B51C36168174E656F2E5472616E73616374696F6E2E476574486173686C766B00C3615272654007616168164E656F2E53746F726167652E476574436F6E7465787408636F6E7472616374617C6524056C766B57527AC46C766B57C30B746F74616C537570706C79617C659C056C766B58527AC46C766B58C36C766B56C3946C766B58527AC46C766B57C30B746F74616C537570706C796C766B58C361527265C205616C766B00C3006C766B56C3615272658C0061616C766B00C3006C766B56C3615272087472616E7366657254C168124E656F2E52756E74696D652E4E6F7469667961616C766B51C36168174E656F2E5472616E73616374696F6E2E476574486173686C766B00C3617C06726566756E6453C168124E656F2E52756E74696D652E4E6F7469667961516C766B5B527AC46203006C766B5BC3616C756656C56B6C766B00527AC46C766B51527AC46C766B52527AC46161682953797374656D2E457865637574696F6E456E67696E652E476574536372697074436F6E7461696E65726168174E656F2E5472616E73616374696F6E2E476574486173686C766B53527AC46153C5766C766B00C3007CC4766C766B51C3517CC4766C766B52C3527CC46C766B54527AC46168164E656F2E53746F726167652E476574436F6E74657874067478496E666F617C6587036C766B55527AC46C766B55C36C766B53C36C766B54C36168154E656F2E52756E74696D652E53657269616C697A6561527265470561616C756600C56B0443474153616C756600C56B1C7B224E45502D35222C20224E45502D37222C20224E45502D3130227D616C756652C56B616168164E656F2E53746F726167652E476574436F6E7465787408636F6E7472616374617C65F3026C766B00527AC46C766B00C30B746F74616C537570706C79617C656B036C766B51527AC46203006C766B51C3616C756653C56B6C766B00527AC46C766B51527AC46C766B52527AC451616C75665FC56B6C766B00527AC46C766B51527AC46C766B52527AC46C766B53527AC4616C766B00C3C00114907C907C9E6311006C766B51C3C001149C009C620400516C766B57527AC46C766B57C3643E003754686520706172616D65746572732066726F6D20616E6420746F2053484F554C442062652032302D62797465206164647265737365732E6175F06C766B52C300A16C766B58527AC46C766B58C36433002C54686520706172616D6574657220616D6F756E74204D5553542062652067726561746572207468616E20302E6175F06C766B51C3616575F4009C6C766B59527AC46C766B59C3640E00006C766B5A527AC462A9016C766B00C36168184E656F2E52756E74696D652E436865636B5769746E6573736311006C766B00C36C766B53C39E620400006C766B5B527AC46C766B5BC3640E00006C766B5A527AC4625D016168164E656F2E53746F726167652E476574436F6E74657874056173736574617C6542016C766B54527AC46C766B54C36C766B00C3617C6566016C766B55527AC46C766B55C36C766B52C39F6C766B5C527AC46C766B5CC3640E00006C766B5A527AC462F7006C766B00C36C766B51C39C6C766B5D527AC46C766B5DC3640E00516C766B5A527AC462D2006C766B55C36C766B52C39C6C766B5E527AC46C766B5EC36416006C766B54C36C766B00C3617C65560261621F006C766B54C36C766B00C36C766B55C36C766B52C39461527265DD01616C766B54C36C766B51C3617C65BD006C766B56527AC46C766B54C36C766B51C36C766B56C36C766B52C39361527265AB01616C766B00C36C766B51C36C766B52C36152726517FC61616C766B00C36C766B51C36C766B52C3615272087472616E7366657254C168124E656F2E52756E74696D652E4E6F7469667961516C766B5A527AC46203006C766B5AC3616C756653C56B6C766B00527AC46C766B51527AC4616152C5766C766B00C3007CC4766C766B51C3517CC46C766B52527AC46203006C766B52C3616C756654C56B6C766B00527AC46C766B51527AC4616C766B00C351C301007E6C766B51C37E6C766B52527AC46C766B00C300C36C766B52C3617C680F4E656F2E53746F726167652E4765746C766B53527AC46203006C766B53C3616C756654C56B6C766B00527AC46C766B51527AC4616C766B00C351C301007E6C766B51C37E6C766B52527AC46C766B00C300C36C766B52C3617C680F4E656F2E53746F726167652E4765746C766B53527AC46203006C766B53C3616C756654C56B6C766B00527AC46C766B51527AC46C766B52527AC4616C766B00C351C301007E6C766B51C37E6C766B53527AC46C766B00C300C36C766B53C36C766B52C3615272680F4E656F2E53746F726167652E50757461616C756654C56B6C766B00527AC46C766B51527AC46C766B52527AC4616C766B00C351C301007E6C766B51C37E6C766B53527AC46C766B00C300C36C766B53C36C766B52C3615272680F4E656F2E53746F726167652E50757461616C756653C56B6C766B00527AC46C766B51527AC4616C766B00C351C301007E6C766B51C37E6C766B52527AC46C766B00C300C36C766B52C3617C68124E656F2E53746F726167652E44656C65746561616C756654C56B6C766B00527AC46C766B51527AC46C766B52527AC4616C766B00C351C301007E6C766B51C37E6C766B53527AC46C766B00C300C36C766B53C36C766B52C3615272680F4E656F2E53746F726167652E50757461616C7566");

                //   Console.WriteLine(Helper.Bytes2HexString(AVM));
                var ops = Avm2Asm.Trans(AVM);
                foreach (var item in ops)
                {

                //    Console.WriteLine(item.Key + item.Value);

                //}
                //for (var i = 0; i < ops.Count; i++)
                //{

                    var op = item.Value;
                    Console.WriteLine(op.toString());
                    try
                    {
                        if (op.toString().Substring(3, 10) == "APPCALL")
                        {
                            Console.WriteLine("[" + Helper.Bytes2HexString(Helper.HexString2Bytes(op.toString().Substring(13, 53))) + "]");
                        }
                    }
                    catch (Exception e) {
                        //Console.WriteLine(e.ToString());
                    }
                }
            }
            catch (Exception err)
            {
                Console.WriteLine("Open File Error:" + err.ToString());
                return;
            }
            Console.WriteLine("End here");
        }
    }
}
